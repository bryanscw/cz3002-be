= Getting started with CogBench API
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toc-title: Table of Content
:toclevels: 4

For the backend, Continuous Integration is used to ensure that the code that is pushed to the development branches is always in working condition, and that the developers working on the backend are immediately notified of any failure in tests so that the failures/errors can be remedied as soon as possible. Travis is used for Continuous Integration in the backend. Upon adding any new features, a Pull Request is raised for integrating the changes in the development branch into the master branch. Travis will help test the Pull Request commits and branch, and let all parties involved know of the test results. After testing the logic of the code, load testing is done on the application. Once both test passes, the requested code vetter will vet changes in the code/file to ensure that certain standards, i.e. Google java Style, is used for the incoming changes. This way, the changes are doubly checked by both automated testing and code reviewer to ensure working and standardised code is always in the master branch.


This is the documentation for cogbench APIs and are automatically generated through tests which were written to test use cases for the cogbench application. At the end of each test case (after comparing expected outputs to true outputs), the .andDo(document(...)) method is called to document the method and pretty print the request and response body. Click on the hyperlinks on the left of this page to jump to the section desired. For each action, 3 sample requests and 3 sample responses are provided.

Do note that while the documentation of the APIs are in the format http://localhost:8080/<Documented API endpoint>,
the actual format of the APIs are as follows: http://localhost:8080/cogbench/api<Documented API endpoint>

== oAuth

=== Login user if credentials are valid

.Request sample with curl
include::{snippets}/should_allow_ifValidCredentials/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_allow_ifValidCredentials/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_allow_ifValidCredentials/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_allow_ifValidCredentials/http-response.adoc[]

.Request sample
include::{snippets}/should_allow_ifValidCredentials/request-body.adoc[]

.Response sample
include::{snippets}/should_allow_ifValidCredentials/response-body.adoc[]

=== Logout if valid session

.Request sample with curl
include::{snippets}/should_logout_ifValidSession/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_logout_ifValidSession/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_logout_ifValidSession/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_logout_ifValidSession/http-response.adoc[]

.Request sample
include::{snippets}/should_logout_ifValidSession/request-body.adoc[]

.Response sample
include::{snippets}/should_logout_ifValidSession/response-body.adoc[]

=== Reject user if credentials are invalid

.Request sample with curl
include::{snippets}/should_reject_ifInvalidCredentials/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_reject_ifInvalidCredentials/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_reject_ifInvalidCredentials/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_reject_ifInvalidCredentials/http-response.adoc[]

.Request sample
include::{snippets}/should_reject_ifInvalidCredentials/request-body.adoc[]

.Response sample
include::{snippets}/should_reject_ifInvalidCredentials/response-body.adoc[]

=== Logout with invalid Session

.Request sample with curl
include::{snippets}/should_throwError_ifInvalidSession/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_throwError_ifInvalidSession/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_throwError_ifInvalidSession/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_throwError_ifInvalidSession/http-response.adoc[]

.Request sample
include::{snippets}/should_throwError_ifInvalidSession/request-body.adoc[]

.Response sample
include::{snippets}/should_throwError_ifInvalidSession/response-body.adoc[]

== Admin

=== Allow request to get list of tokens if authorized

.Request sample with curl
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/http-response.adoc[]

.Request sample
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/request-body.adoc[]

.Response sample
include::{snippets}/should_allowfetchListOfTokens_ifAuthorized/response-body.adoc[]

=== Reject request to get list of tokens if not authorized

.Request sample with curl
include::{snippets}/should_rejectRequest_ifNotAuthorized/curl-request.adoc[]

.Request sample with http
include::{snippets}/should_rejectRequest_ifNotAuthorized/http-request.adoc[]

.Request sample with httpie
include::{snippets}/should_rejectRequest_ifNotAuthorized/httpie-request.adoc[]

.HTTP response
include::{snippets}/should_rejectRequest_ifNotAuthorized/http-response.adoc[]

.Request sample
include::{snippets}/should_rejectRequest_ifNotAuthorized/request-body.adoc[]

.Response sample
include::{snippets}/should_rejectRequest_ifNotAuthorized/response-body.adoc[]

== User
